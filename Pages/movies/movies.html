<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surveillance Footage Archive - Mystery Hub</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../css/movies.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Special+Elite&family=Homemade+Apple&family=Cutive+Mono&display=swap" rel="stylesheet">
    <script>
        window.MYSTERY_HUB_CONFIG = {
            navbarClock: true
        };
    </script>
    <script src="../clock/clock.js"></script>
</head>
<body class="vintage-background">
    <div class="paper-texture"></div>
    
    <!-- File Stamp Decoration -->
    <div class="file-stamp">
        <span>TOP SECRET</span>
    </div>
    
    <!-- Paper Clip Decoration -->
    <div class="paper-clip"></div>
    
    

    <!-- Header with Navigation -->
    <header>
        <nav class="navbar">
            <div class="logo">
                <a href="../../index.html">
                    <h1>Mystery<span>Hub</span></h1>
                </a>
            </div>
            <ul class="nav-links">
                <li><a href="../../index.html">Home Base</a></li>
                <li><a href="../games/game1.html">Field Operations</a></li>
                <li><a href="../blog/blog.html">Case Files</a></li>
                <li><a href="../movies/movies.html">Surveillance Footage</a></li>
                <li><a href="../login.html" class="active">Login</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content Section -->
    <section class="main-content">
        <div class="container">
            <div class="movies-container">
                <div class="movies-header">
                    <div class="file-label">EVIDENCE ARCHIVE</div>
                    <div class="confidential-stamp">CLASSIFIED</div>
                    <h1 class="movies-title">Surveillance Footage Analysis</h1>
                    <p class="movies-description">
                        Explore our collection of carefully analyzed surveillance footage from the field. These cinematic recordings provide valuable insights into investigative techniques, psychological profiling, and criminal analysis. All materials have been verified by senior agents.
                    </p>
                </div>
                
                <div class="slideshow-container">
                   
                    <!-- Slides will be dynamically loaded here -->
                    <div id="slideshow-content">
                        <!-- Loading placeholder -->
                        <div class="loading-indicator">
                            <i class="fas fa-circle-notch fa-spin"></i> Loading surveillance footage...
                        </div>
                    </div>
                    
                    <!-- Slideshow Controls -->
                    <div class="slideshow-dots" id="slideshow-dots">
                        <!-- Dots will be dynamically generated -->
                    </div>
                    
                    <div class="slideshow-controls">
                        <div class="slideshow-arrow prev-arrow"><i class="fas fa-arrow-left"></i></div>
                        <div class="slideshow-arrow next-arrow"><i class="fas fa-arrow-right"></i></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="vintage-footer">
        <div class="container">
            <div class="footer-content">
                <ul class="footer-links">
                    <li><a href="../index.html">Headquarters</a></li>
                    <li><a href="../games/game1.html">Field Operations</a></li>
                    <li><a href="../blog/blog.html">Case Files</a></li>
                    <li><a href="movies.html">Surveillance Footage</a></li>
                    <li><a href="../Pages/login.html">Agent Login</a></li>
                </ul>
                
                <p class="copyright handwritten-note">Bintu Jalloh & Michelle Lawson, Mystery Hub</p>
            </div>
        </div>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let slides = [];
            let dots = [];
            let currentSlide = 0;
            const slideshowContent = document.getElementById('slideshow-content');
            const slideshowDots = document.getElementById('slideshow-dots');
            const prevArrow = document.querySelector('.prev-arrow');
            const nextArrow = document.querySelector('.next-arrow');
            
            // Fetch movies data from the server
            fetch('../../Backend/Php/get_movies.php')
                .then(response => response.json())
                .then(result => {
                    if (result.success && result.data.length > 0) {
                        // Clear loading placeholder
                        slideshowContent.innerHTML = '';
                        slideshowDots.innerHTML = '';
                        
                        // Generate slides and dots for each movie
                        result.data.forEach((movie, index) => {
                            // Create slide
                            const slideHTML = `
                                <div class="slideshow-slide ${index === 0 ? 'active' : ''}" data-index="${index}" 
                                     style="background-image: url('../../assets/images/${movie.image}')">
                                    <div class="movie-info-overlay">
                                        <div class="movie-title-overlay">${movie.title}</div>
                                        <div class="movie-year-overlay">Released: ${movie.year}</div>
                                        <div class="slide-caption-overlay">${movie.description}</div>
                                    </div>
                                </div>
                            `;
                            slideshowContent.insertAdjacentHTML('beforeend', slideHTML);
                            
                            // Create dot
                            const dotHTML = `<div class="slideshow-dot ${index === 0 ? 'active' : ''}" data-index="${index}"></div>`;
                            slideshowDots.insertAdjacentHTML('beforeend', dotHTML);
                        });
                        
                        // Update slides and dots after DOM is updated
                        slides = document.querySelectorAll('.slideshow-slide');
                        dots = document.querySelectorAll('.slideshow-dot');
                        
                        // Add click event to dots
                        dots.forEach(dot => {
                            dot.addEventListener('click', function() {
                                const index = parseInt(this.getAttribute('data-index'));
                                showSlide(index);
                            });
                        });
                        
                        // Initialize slideshow controls
                        prevArrow.addEventListener('click', prevSlide);
                        nextArrow.addEventListener('click', nextSlide);
                    } else {
                        // Show error if no movies found
                        slideshowContent.innerHTML = `
                            <div class="error-message">
                                <i class="fas fa-exclamation-triangle"></i>
                                <p>Error loading surveillance footage. File may be classified or missing.</p>
                            </div>
                        `;
                    }
                })
                .catch(error => {
                    console.error('Error fetching movies:', error);
                    slideshowContent.innerHTML = `
                        <div class="error-message">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>Error loading surveillance footage. Connection may be compromised.</p>
                        </div>
                    `;
                });
            
            function showSlide(index) {
                if (index < 0) index = slides.length - 1;
                if (index >= slides.length) index = 0;
                
                slides.forEach(slide => slide.classList.remove('active'));
                dots.forEach(dot => dot.classList.remove('active'));
                
                slides[index].classList.add('active');
                dots[index].classList.add('active');
                currentSlide = index;
            }
            
            function nextSlide() {
                showSlide(currentSlide + 1);
            }
            
            function prevSlide() {
                showSlide(currentSlide - 1);
            }
            
            // Auto slideshow
            setInterval(nextSlide, 7000);
        });
    </script>
</body>
</html>
